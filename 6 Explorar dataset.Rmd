---
title: "Exploración del dataset"
output: html_notebook
---

En el paso anterior se ha generado un dataset que contiene los nodos del grafo y los valores de cuatro medidas de centralidad estudiadas en cada uno de ellos.
Ahora nos disponemos a realizar un estudio preliminar del mismo.

Cargamos las librerías necesarias. 
```{r}
#install.packages("corrplot")
library(igraph)
library(readxl)
library(corrplot)
```
Cargo el dataframe y me quedo con las métricas para estudiar la relación que tienen entre sí.
```{r}
df <- read.table("./dataframe.txt", header = TRUE, sep = ",")
```
Inspeccionamos el dataset generado.
```{r}
print(df)
```

El dataset esta formado por 177 filas y X columnas. La primera de ellas contiene los genes que eran los nodos del grafo, las cuatro siguientes los datos de las medidas de centralidad (degree, centrality, closeness, betweenness) y las restantes las etiquetas sobre las que se realiza el aprendizaje supervisado.

```{r}
summary(df)
```
En primer lugar, veremos la relación entre los predictores (las medidas de centralidad)
```{r}
grafodf <- df[, 1:5 ]
```
Lo observamos gráficamente.
```{r}
plot(grafodf[, -1])
```
Y representamos en un histograma cada uno de los atributos para ver su distribución.
```{r}
hist(grafodf$Degree)
hist(grafodf$Centrality)
hist(grafodf$Closeness)
hist(grafodf$Betweeness)
```
- Degree: los datos estan balanceados. El rango de valores es (0, 80). Hay mayor tasa de nodos en los valores inferiores a 10.
- Centrality: los datos estan balanceados. El rango de balores es (0, 1). Se observa mayor cantidad de datos en los valores inferiores a o.3.
- Closeness. Los datos se agrupan o bien en inferiores a o,01 o en superiores a 0.045. En medio no existen datos. El rango de valores es (0, 0.006)
- Betweeness. La mayoría de ejemplos tienen un valor inferior a 50. El rango de valores es (0, 600).



Generamos la matriz de correlación
```{r}
cormatrix <- cor(grafodf[,-1], method = "pearson")
print(cormatrix)
```
Ahora de otra forma: 
```{r}
symnum(cormatrix, cutpoints = c(0.2, 0.4, 0.6, 0.8, 0.9, 0.95, 1),
                    symbols = c(" ", ".", ",", "+", "*", "B"),
                    abbr.colnames = TRUE)
```
Finalmente con un dibujo
```{r}
corrplot(cormatrix, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45)
```

Y con un mapa de calor:
```{r}
col<- colorRampPalette(c("blue", "white", "red"))(20)
heatmap(x = cormatrix, col = col, symm = TRUE)
```

De aquí podemos concluir que existe una mayor relación entre las medidas de "centrality" y "degree" y la menor correlación se da entre "degree" y "betweeness". 


Este dataset será usado para aprendizaje supervisado.
Por ello, debe contener un campo que funcione como etiqueta cuyo valor intentaremos predecir.
Ahora estudiamos la distribución de las etiquetas dentro del conjunto de datos.
```{r}

hist(df$Nodo.aislado)
hist(df$Estar.TCGA)
```
En ambos casos, la mayoría de ejemplos se clasifican dentro de la clase 0, es decir, no poseen las características a las que aluden las etiquetas ("ser nodo aislado", "estar en TCGA").
Los datos por tanto no se encuentran balanceados entre las dos categorías de clasificación (1 y 2).

Finalmente representamos gráficamente el dataframe completo.
```{r}
plot(df)
```

